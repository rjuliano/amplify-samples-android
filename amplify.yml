version: 1
applications:
  - appRoot: web/rust/dashboard-rs
    frontend:
      phases:
        preBuild:
          commands:
            # - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
            - source $HOME/.cargo/env
            # - rustup toolchain install stable 
            - echo $PATH
            - which rustc
            - which rustup
            - rustup target add wasm32-unknown-unknown 
            - cargo install --locked trunk
            - cargo install wasm-bindgen-cli
        build:
          commands:
            - trunk build
      artifacts:
        baseDirectory: /dist
        files:
          - '**/*'
      cache:
        paths: []
    
